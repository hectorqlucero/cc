{% extends "base.html" %}
{% block content %}
{% csrf-field %}
<table id="dg"
       class="easyui-datagrid datagrid-searchable"
       style="width: 100%"
       data-options="url: '/cartas/exoneracion/json/grid',
           toolbar: '#toolbar',
           queryParams: {'__anti-forgery-token':token},
           pagination: true,
           rownumbers: true,
           nowrap: true,
           autoRowHeight: false,
           fitColumns: true,
           autoSizeColumn: true,
           singleSelect: true">
    <thead>
        <tr>
            <th data-options="field: 'no_participacion', sortable: true">Numero de Participacion</th>
            <th data-options="field: 'nombre', sortable: true">Nombre</th>
            <th data-options="field: 'apellido_paterno', sortable: true">Apellido Paterno</th>
            <th data-options="field: 'apellido_materno', sortable: true">Apellido Materno</th>
            <th data-options="field: 'sexo', sortable: true">Sexo</th>
            <th data-options="field: 'telefono', sortable: false">Telefono</th>
            <th data-options="field: 'celular', sortable: false">Celular</th>
            <th data-options="field: 'email', sortable: false">Email</th>
            <th data-options="field: 'bicicleta', sortable: false">Tipo de Bicicleta</th>
        </tr>
    </thead>
</table>
<div id="toolbar">
    <a href="javascript:void(0)"
       class="easyui-linkbutton"
       data-options="iconCls: 'icon-add',plain: true"
       onclick="defaultGridNewItem()">Crear</a>
    <a href="javascript:void(0)"
       class="easyui-linkbutton"
       data-options="iconCls: 'icon-edit',plain: true"
       onclick="defaultGridEditItem({})">Editar</a>
    <a href="javascript:void(0)"
       class="easyui-linkbutton"
       data-options="iconCls: 'icon-remove',plain: true"
       onclick="defaultGridDeleteItem()">Remover</a>
    <a href="javascript:void(0)"
       class="easyui-linkbutton"
       data-options="iconCls: 'icon-print',plain: true"
       onclick="printItem()">Generar PDF/Imprimir</a>
    <div style="float: right">
        <input class="easyui-textbox" id="datagrid-searchbox" data-options="prompt: 'Busqueda'" title="Buscar">
    </div>
</div>

<div class="easyui-dialog dlg" data-options="closed: true, buttons: '#dlg-buttons'" style="padding: 5px">
    <form class="fm" method="POST" enctype="multipart/form-data" novalidate>
        <input type="hidden" id="id"  name="id">
        <div class="fitem">
            <label for="categoria">Categoria:</label>
            <select id="categoria" name="categoria" class="easyui-combobox" style="width:200px;" data-options="required: true">
                <option value="A">Abierta</option>
                <option value="N">Novatos</option>
            </select>
        </div>
        <div class="fitem">
            <label for="sexo">Sexo:</label>
            <select id="sexo" name="sexo" class="easyui-combobox" style="width:200px;" data-options="required: true">
                <option value="M">Masculino</option>
                <option value="F">Femenino</option>
            </select>
        </div>
        <div class="fitem">
            <label for="bicicleta">Bicicleta:</label>
            <select id="bicicleta" name="bicicleta" class="easyui-combobox" style="width:200px;" data-options="required: true">
                <option value="F">Fija</option>
                <option value="S">SS</option>
                <option value="O">Otra</option>
            </select>
        </div>
        <div class="fitem">
            <label for="no_participacion">Numero de Participacion:</label>
            <input id="no_participacion" name="no_participacion" class="easyui-textbox" data-options="required: false,width:'50%'">
        </div>
        <div class="fitem">
            <label for="nombre">Nombre:</label>
            <input id="nombre" name="nombre" class="easyui-textbox" data-options="required: true,width:'50%'">
        </div>
        <div class="fitem">
            <label for="apellido_paterno">Apellido Paterno:</label>
            <input id="apellido_paterno" name="apellido_paterno" class="easyui-textbox" data-options="required: true,width:'50%'">
        </div>
        <div class="fitem">
            <label for="apellido_materno">Apellido Materno:</label>
            <input id="apellido_materno" name="apellido_materno" class="easyui-textbox" data-options="required: true,width:'50%'">
        </div>
        <div class="fitem">
            <label for="equipo">Equipo:</label>
            <input id="equipo" name="equipo" class="easyui-textbox" data-options="required: true,width:'50%'">
        </div>
        <div class="fitem">
            <label for="direccion">Direcci√≥n:</label>
            <input id="direccion" name="direccion" class="easyui-textbox" data-options="required: true,width:'50%'">
        </div>
        <div class="fitem">
            <label for="ciudad">Ciudad:</label>
            <input id="ciudad" name="ciudad" class="easyui-textbox" data-options="required: true,width:'50%'">
        </div>
        <div class="fitem">
            <label for="pais">Pais:</label>
            <input id="pais" name="pais" class="easyui-textbox" data-options="required: true,width:'50%'">
        </div>
        <div class="fitem">
            <label for="celular">Celular:</label>
            <input id="celular" name="celular" class="easyui-textbox type-phone" data-options="required: false">
        </div>
        <div class="fitem">
            <label for="telefono">Telefono:</label>
            <input id="telefono" name="telefono" class="easyui-textbox type-phone" data-options="required: false">
        </div>
        <div class="fitem">
            <label for="email">Email:</label>
            <input id="email" name="email" class="easyui-validatebox" data-options="required:true,validType:'email'" style="width:50%">
        </div>
        <div class="fitem">
            <label for="tutor">Nombre del padre o tutor (En su caso):</label>
            <input id="tutor" name="tutor" class="easyui-textbox" data-options="required: false,width:'50%'">
        </div>
    </form>
</div>
<div id="dlg-buttons">
    <a href="javascript:void(0)"
       class="easyui-linkbutton"
       data-options="iconCls: 'icon-ok'"
       onclick="defaultGridSaveItem()">Postear</a>
    <a href="javascript:void(0)"
       class="easyui-linkbutton"
       data-options="iconCls: 'icon-cancel'"
       onclick="defaultGridDialogClose()">Cancelar</a>
</div>
{% endblock %}
{% block scripts %}
<script type="text/javascript" src="/js/defaultGrid.js"></script>
<script>
 function printItem() {
     var row = $('#dg').datagrid('getSelected');
     var the_id = row.id;
     var the_url = "/cartas/exoneracion/pdf/" + the_id;
     window.location = the_url;
 }
</script>
{% endblock %}
